!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("btoa"),require("svg2png"),require("object-assign"),require("prop-types"),require("rvg.js"),require("deep-extend")):"function"==typeof define&&define.amd?define("CardKitServer",["react","btoa","svg2png","object-assign","prop-types","rvg.js","deep-extend"],t):"object"==typeof exports?exports.CardKitServer=t(require("react"),require("btoa"),require("svg2png"),require("object-assign"),require("prop-types"),require("rvg.js"),require("deep-extend")):e.CardKitServer=t(e.react,e.btoa,e.svg2png,e["object-assign"],e["prop-types"],e["rvg.js"],e["deep-extend"])}(window,(function(e,t,r,n,o,i,a){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=1)}([function(t,r){t.exports=e},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(2),s=r(3),f=r(0),p=r(4),h=r(7),d=r(10),y=r(13),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(l,e);var t,r,n,u=a(l);function l(e){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),"undefined"!=typeof document)throw new Error("CardKitServer can only be used in a server environment");return u.call(this,e)}return t=l,(r=[{key:"renderToString",value:function(){return p.renderToString(f.createFactory(h)({configuration:this.computeConfiguration()}),{})}},{key:"renderToImage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.renderToString(),r=y.svgToBase64(t,c);return s(r,{width:this.computeConfiguration().card.width*e,height:this.computeConfiguration().card.height*e}).then((function(e){return e.toString("base64")}))}}])&&o(t.prototype,r),n&&o(t,n),l}(d);e.exports=m},function(e,r){e.exports=t},function(e,t){e.exports=r},function(e,t,r){"use strict";e.exports=r(5)},function(e,t,r){"use strict";
/** @license React v17.0.2
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n=r(6),o=r(0);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=60106,u=60107,l=60108,c=60114,s=60109,f=60110,p=60112,h=60113,d=60120,y=60115,m=60116,g=60121,v=60117,b=60119,w=60129,x=60131;if("function"==typeof Symbol&&Symbol.for){var k=Symbol.for;a=k("react.portal"),u=k("react.fragment"),l=k("react.strict_mode"),c=k("react.profiler"),s=k("react.provider"),f=k("react.context"),p=k("react.forward_ref"),h=k("react.suspense"),d=k("react.suspense_list"),y=k("react.memo"),m=k("react.lazy"),g=k("react.block"),v=k("react.fundamental"),b=k("react.scope"),w=k("react.debug_trace_mode"),x=k("react.legacy_hidden")}function S(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case u:return"Fragment";case a:return"Portal";case c:return"Profiler";case l:return"StrictMode";case h:return"Suspense";case d:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case f:return(e.displayName||"Context")+".Consumer";case s:return(e._context.displayName||"Context")+".Provider";case p:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case y:return S(e.type);case g:return S(e._render);case m:t=e._payload,e=e._init;try{return S(e(t))}catch(e){}}return null}var E=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,C={};function O(e,t){for(var r=0|e._threadCount;r<=t;r++)e[r]=e._currentValue2,e._threadCount=r+1}for(var _=new Uint16Array(16),j=0;15>j;j++)_[j]=j+1;_[15]=0;var F=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,P=Object.prototype.hasOwnProperty,I={},D={};function R(e){return!!P.call(D,e)||!P.call(I,e)&&(F.test(e)?D[e]=!0:(I[e]=!0,!1))}function V(e,t,r,n,o,i,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=n,this.attributeNamespace=o,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=a}var L={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){L[e]=new V(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];L[t]=new V(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){L[e]=new V(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){L[e]=new V(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){L[e]=new V(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){L[e]=new V(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){L[e]=new V(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){L[e]=new V(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){L[e]=new V(e,5,!1,e.toLowerCase(),null,!1,!1)}));var T=/[\-:]([a-z])/g;function M(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(T,M);L[t]=new V(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(T,M);L[t]=new V(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(T,M);L[t]=new V(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){L[e]=new V(e,1,!1,e.toLowerCase(),null,!1,!1)})),L.xlinkHref=new V("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){L[e]=new V(e,1,!1,e.toLowerCase(),null,!0,!0)}));var N=/["'&<>]/;function z(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=N.exec(e);if(t){var r,n="",o=0;for(r=t.index;r<e.length;r++){switch(e.charCodeAt(r)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==r&&(n+=e.substring(o,r)),o=r+1,n+=t}e=o!==r?n+e.substring(o,r):n}return e}function q(e,t){var r,n=L.hasOwnProperty(e)?L[e]:null;return(r="style"!==e)&&(r=null!==n?0===n.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),r||function(e,t,r,n){if(null==t||function(e,t,r,n){if(null!==r&&0===r.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!n&&(null!==r?!r.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,r,n))return!0;if(n)return!1;if(null!==r)switch(r.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,n,!1)?"":null!==n?(e=n.attributeName,3===(r=n.type)||4===r&&!0===t?e+'=""':(n.sanitizeURL&&(t=""+t),e+'="'+z(t)+'"')):R(e)?e+'="'+z(t)+'"':""}var A="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},W=null,H=null,U=null,$=!1,B=!1,Y=null,K=0;function G(){if(null===W)throw Error(i(321));return W}function Z(){if(0<K)throw Error(i(312));return{memoizedState:null,queue:null,next:null}}function X(){return null===U?null===H?($=!1,H=U=Z()):($=!0,U=H):null===U.next?($=!1,U=U.next=Z()):($=!0,U=U.next),U}function Q(e,t,r,n){for(;B;)B=!1,K+=1,U=null,r=e(t,n);return J(),r}function J(){W=null,B=!1,H=null,K=0,U=Y=null}function ee(e,t){return"function"==typeof t?t(e):t}function te(e,t,r){if(W=G(),U=X(),$){var n=U.queue;if(t=n.dispatch,null!==Y&&void 0!==(r=Y.get(n))){Y.delete(n),n=U.memoizedState;do{n=e(n,r.action),r=r.next}while(null!==r);return U.memoizedState=n,[n,t]}return[U.memoizedState,t]}return e=e===ee?"function"==typeof t?t():t:void 0!==r?r(t):t,U.memoizedState=e,e=(e=U.queue={last:null,dispatch:null}).dispatch=ne.bind(null,W,e),[U.memoizedState,e]}function re(e,t){if(W=G(),t=void 0===t?null:t,null!==(U=X())){var r=U.memoizedState;if(null!==r&&null!==t){var n=r[1];e:if(null===n)n=!1;else{for(var o=0;o<n.length&&o<t.length;o++)if(!A(t[o],n[o])){n=!1;break e}n=!0}if(n)return r[0]}}return e=e(),U.memoizedState=[e,t],e}function ne(e,t,r){if(!(25>K))throw Error(i(301));if(e===W)if(B=!0,e={action:r,next:null},null===Y&&(Y=new Map),void 0===(r=Y.get(t)))Y.set(t,e);else{for(t=r;null!==t.next;)t=t.next;t.next=e}}function oe(){}var ie=null,ae={readContext:function(e){var t=ie.threadID;return O(e,t),e[t]},useContext:function(e){G();var t=ie.threadID;return O(e,t),e[t]},useMemo:re,useReducer:te,useRef:function(e){W=G();var t=(U=X()).memoizedState;return null===t?(e={current:e},U.memoizedState=e):t},useState:function(e){return te(ee,e)},useLayoutEffect:function(){},useCallback:function(e,t){return re((function(){return e}),t)},useImperativeHandle:oe,useEffect:oe,useDebugValue:oe,useDeferredValue:function(e){return G(),e},useTransition:function(){return G(),[function(e){e()},!1]},useOpaqueIdentifier:function(){return(ie.identifierPrefix||"")+"R:"+(ie.uniqueID++).toString(36)},useMutableSource:function(e,t){return G(),t(e._source)}},ue="http://www.w3.org/1999/xhtml";function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var ce={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},se=n({menuitem:!0},ce),fe={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var he=/([A-Z])/g,de=/^ms-/,ye=o.Children.toArray,me=E.ReactCurrentDispatcher,ge={listing:!0,pre:!0,textarea:!0},ve=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},we={};var xe=Object.prototype.hasOwnProperty,ke={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Se(e,t){if(void 0===e)throw Error(i(152,S(t)||"Component"))}function Ee(e,t,r){function a(o,a){var u=a.prototype&&a.prototype.isReactComponent,l=function(e,t,r,n){if(n&&("object"==typeof(n=e.contextType)&&null!==n))return O(n,r),n[r];if(e=e.contextTypes){for(var o in r={},e)r[o]=t[o];t=r}else t=C;return t}(a,t,r,u),c=[],s=!1,f={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===c)return null},enqueueReplaceState:function(e,t){s=!0,c=[t]},enqueueSetState:function(e,t){if(null===c)return null;c.push(t)}};if(u){if(u=new a(o.props,l,f),"function"==typeof a.getDerivedStateFromProps){var p=a.getDerivedStateFromProps.call(null,o.props,u.state);null!=p&&(u.state=n({},u.state,p))}}else if(W={},u=a(o.props,l,f),null==(u=Q(a,o.props,u,l))||null==u.render)return void Se(e=u,a);if(u.props=o.props,u.context=l,u.updater=f,void 0===(f=u.state)&&(u.state=f=null),"function"==typeof u.UNSAFE_componentWillMount||"function"==typeof u.componentWillMount)if("function"==typeof u.componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&u.componentWillMount(),"function"==typeof u.UNSAFE_componentWillMount&&"function"!=typeof a.getDerivedStateFromProps&&u.UNSAFE_componentWillMount(),c.length){f=c;var h=s;if(c=null,s=!1,h&&1===f.length)u.state=f[0];else{p=h?f[0]:u.state;var d=!0;for(h=h?1:0;h<f.length;h++){var y=f[h];null!=(y="function"==typeof y?y.call(u,p,o.props,l):y)&&(d?(d=!1,p=n({},p,y)):n(p,y))}u.state=p}}else c=null;if(Se(e=u.render(),a),"function"==typeof u.getChildContext&&"object"==typeof(o=a.childContextTypes)){var m=u.getChildContext();for(var g in m)if(!(g in o))throw Error(i(108,S(a)||"Unknown",g))}m&&(t=n({},t,m))}for(;o.isValidElement(e);){var u=e,l=u.type;if("function"!=typeof l)break;a(u,l)}return{child:e,context:t}}var Ce=function(){function e(e,t,r){o.isValidElement(e)?e.type!==u?e=[e]:(e=e.props.children,e=o.isValidElement(e)?[e]:ye(e)):e=ye(e),e={type:null,domNamespace:ue,children:e,childIndex:0,context:C,footer:""};var n=_[0];if(0===n){var a=_,l=2*(n=a.length);if(!(65536>=l))throw Error(i(304));var c=new Uint16Array(l);for(c.set(a),(_=c)[0]=n+1,a=n;a<l-1;a++)_[a]=a+1;_[l-1]=0}else _[0]=_[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[],this.uniqueID=0,this.identifierPrefix=r&&r.identifierPrefix||""}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;_[e]=_[0],_[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,r=e.type._context,n=this.threadID;O(r,n);var o=r[n];this.contextStack[t]=r,this.contextValueStack[t]=o,r[n]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],r=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=r},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=ie;ie=this;var r=me.current;me.current=ae;try{for(var n=[""],o=!1;n[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var a=this.threadID;_[a]=_[0],_[0]=a;break}var u=this.stack[this.stack.length-1];if(o||u.childIndex>=u.children.length){var l=u.footer;if(""!==l&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===u.type)this.currentSelectValue=null;else if(null!=u.type&&null!=u.type.type&&u.type.type.$$typeof===s)this.popProvider(u.type);else if(u.type===h){this.suspenseDepth--;var c=n.pop();if(o){o=!1;var f=u.fallbackFrame;if(!f)throw Error(i(303));this.stack.push(f),n[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}n[this.suspenseDepth]+=c}n[this.suspenseDepth]+=l}else{var p=u.children[u.childIndex++],d="";try{d+=this.render(p,u.context,u.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(i(294));throw e}n.length<=this.suspenseDepth&&n.push(""),n[this.suspenseDepth]+=d}}return n[0]}finally{me.current=r,ie=t,J()}},t.render=function(e,t,r){if("string"==typeof e||"number"==typeof e)return""===(r=""+e)?"":this.makeStaticMarkup?z(r):this.previousWasTextNode?"\x3c!-- --\x3e"+z(r):(this.previousWasTextNode=!0,z(r));if(e=(t=Ee(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((r=e.$$typeof)===a)throw Error(i(257));throw Error(i(258,r.toString()))}return e=ye(e),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}var g=e.type;if("string"==typeof g)return this.renderDOM(e,t,r);switch(g){case x:case w:case l:case c:case d:case u:return e=ye(e.props.children),this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case h:throw Error(i(294));case b:throw Error(i(343))}if("object"==typeof g&&null!==g)switch(g.$$typeof){case p:W={};var k=g.render(e.props,e.ref);return k=Q(g.render,e.props,k,e.ref),k=ye(k),this.stack.push({type:null,domNamespace:r,children:k,childIndex:0,context:t,footer:""}),"";case y:return e=[o.createElement(g.type,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),"";case s:return r={type:e,domNamespace:r,children:g=ye(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(r),"";case f:g=e.type,k=e.props;var S=this.threadID;return O(g,S),g=ye(k.children(g[S])),this.stack.push({type:e,domNamespace:r,children:g,childIndex:0,context:t,footer:""}),"";case v:throw Error(i(338));case m:return g=(k=(g=e.type)._init)(g._payload),e=[o.createElement(g,n({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:r,children:e,childIndex:0,context:t,footer:""}),""}throw Error(i(130,null==g?g:typeof g,""))},t.renderDOM=function(e,t,r){var a=e.type.toLowerCase();if(r===ue&&le(a),!be.hasOwnProperty(a)){if(!ve.test(a))throw Error(i(65,a));be[a]=!0}var u=e.props;if("input"===a)u=n({type:void 0},u,{defaultChecked:void 0,defaultValue:void 0,value:null!=u.value?u.value:u.defaultValue,checked:null!=u.checked?u.checked:u.defaultChecked});else if("textarea"===a){var l=u.value;if(null==l){l=u.defaultValue;var c=u.children;if(null!=c){if(null!=l)throw Error(i(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(i(93));c=c[0]}l=""+c}null==l&&(l="")}u=n({},u,{value:void 0,children:""+l})}else if("select"===a)this.currentSelectValue=null!=u.value?u.value:u.defaultValue,u=n({},u,{value:void 0});else if("option"===a){c=this.currentSelectValue;var s=function(e){if(null==e)return e;var t="";return o.Children.forEach(e,(function(e){null!=e&&(t+=e)})),t}(u.children);if(null!=c){var f=null!=u.value?u.value+"":s;if(l=!1,Array.isArray(c)){for(var p=0;p<c.length;p++)if(""+c[p]===f){l=!0;break}}else l=""+c===f;u=n({selected:void 0,children:void 0},u,{selected:l,children:s})}}if(l=u){if(se[a]&&(null!=l.children||null!=l.dangerouslySetInnerHTML))throw Error(i(137,a));if(null!=l.dangerouslySetInnerHTML){if(null!=l.children)throw Error(i(60));if("object"!=typeof l.dangerouslySetInnerHTML||!("__html"in l.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=l.style&&"object"!=typeof l.style)throw Error(i(62))}l=u,c=this.makeStaticMarkup,s=1===this.stack.length,f="<"+e.type;e:if(-1===a.indexOf("-"))p="string"==typeof l.is;else switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":p=!1;break e;default:p=!0}for(x in l)if(xe.call(l,x)){var h=l[x];if(null!=h){if("style"===x){var d=void 0,y="",m="";for(d in h)if(h.hasOwnProperty(d)){var g=0===d.indexOf("--"),v=h[d];if(null!=v){if(g)var b=d;else if(b=d,we.hasOwnProperty(b))b=we[b];else{var w=b.replace(he,"-$1").toLowerCase().replace(de,"-ms-");b=we[b]=w}y+=m+b+":",m=d,y+=g=null==v||"boolean"==typeof v||""===v?"":g||"number"!=typeof v||0===v||fe.hasOwnProperty(m)&&fe[m]?(""+v).trim():v+"px",m=";"}}h=y||null}d=null,p?ke.hasOwnProperty(x)||(d=R(d=x)&&null!=h?d+'="'+z(h)+'"':""):d=q(x,h),d&&(f+=" "+d)}}c||s&&(f+=' data-reactroot=""');var x=f;l="",ce.hasOwnProperty(a)?x+="/>":(x+=">",l="</"+e.type+">");e:{if(null!=(c=u.dangerouslySetInnerHTML)){if(null!=c.__html){c=c.__html;break e}}else if("string"==typeof(c=u.children)||"number"==typeof c){c=z(c);break e}c=null}return null!=c?(u=[],ge.hasOwnProperty(a)&&"\n"===c.charAt(0)&&(x+="\n"),x+=c):u=ye(u.children),e=e.type,r=null==r||"http://www.w3.org/1999/xhtml"===r?le(e):"http://www.w3.org/2000/svg"===r&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":r,this.stack.push({domNamespace:r,type:a,children:u,childIndex:0,context:t,footer:l}),this.previousWasTextNode=!1,x},e}();t.renderToNodeStream=function(){throw Error(i(207))},t.renderToStaticMarkup=function(e,t){e=new Ce(e,!0,t);try{return e.read(1/0)}finally{e.destroy()}},t.renderToStaticNodeStream=function(){throw Error(i(208))},t.renderToString=function(e,t){e=new Ce(e,!1,t);try{return e.read(1/0)}finally{e.destroy()}},t.version="17.0.2"},function(e,t){e.exports=n},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=l(e);if(t){var o=l(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return u(this,r)}}function u(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var c=r(0),s=r(8),f=r(9),p=f.SVG,h=f.Text,d=f.Rectangle,y=f.Circle,m=f.Ellipse,g=f.Line,v=f.Image,b=f.Path,w=f.LinearGradient,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&i(e,t)}(s,e);var t,r,u,l=a(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,e)).svgRef=c.createRef(),t}return t=s,(r=[{key:"componentDidMount",value:function(){this.props.onMount(this.svgRef)}},{key:"calculateYPosition",value:function(e,t){var r=this.getLayerValue(e,t,"y");if("object"===n(r)&&"undefined"!==r.attach){var o=e[t.y.attach],i=0;switch(o.type){case"text":var a=o.text.split("\n");""!==o.text&&(i=a.length*(this.getLayerValue(e,o,"lineHeight")||this.getLayerValue(e,o,"fontSize")));break;default:void 0!==this.getLayerValue(e,o,"height")&&(i=this.getLayerValue(e,o,"height"))}var u=t.y.offset||0;r=i+this.calculateYPosition(e,o)+u}return r}},{key:"getLayerValue",value:function(e,t,r){return"function"==typeof t[r]?t[r](e,this.svgRef):t[r]}},{key:"computeGradients",value:function(e){var t,r,n=this,o=[];return Object.keys(e).forEach((function(i){t=e[i],n.getLayerValue(e,t,"gradient")&&(r=n.getLayerValue(e,t,"gradient"),o.push(c.createElement(w,{key:i,name:i,x1:0,x2:0,y1:0,y2:1,stops:r})))})),o}},{key:"computeLayers",value:function(e){var t,r=this,n=[];return Object.keys(e).forEach((function(o){if(t=e[o],!0!==r.getLayerValue(e,t,"hidden")){var i={};switch(Object.keys(t).forEach((function(n){i[n]=r.getLayerValue(e,t,n)})),r.getLayerValue(e,t,"gradient")&&(i.fill="url(#".concat(o,")")),t.type){case"text":var a=i.text.split("\n");n.push(c.createElement(h,{x:i.x,y:r.calculateYPosition(e,i),fontFamily:i.fontFamily,fontSize:i.fontSize,fontWeight:i.fontWeight,lineHeight:i.lineHeight,textAnchor:i.textAnchor,fill:i.fill,draggable:i.draggable,transform:i.transform,opacity:i.opacity,smartQuotes:i.smartQuotes,key:o},a));break;case"image":n.push(c.createElement(v,{x:i.x,y:r.calculateYPosition(e,i),href:i.src,height:i.height,width:i.width,draggable:i.draggable,transform:i.transform,opacity:i.opacity,key:o}));break;case"rectangle":n.push(c.createElement(d,{x:i.x,y:r.calculateYPosition(e,i),fill:i.fill,height:i.height,width:i.width,draggable:i.draggable,transform:i.transform,key:o}));break;case"circle":n.push(c.createElement(y,{x:i.x,y:r.calculateYPosition(e,i),fill:i.fill,radius:i.radius,draggable:i.draggable,transform:i.transform,key:o}));break;case"ellipse":n.push(c.createElement(m,{x:i.x,y:r.calculateYPosition(e,i),fill:i.fill,radiusX:i.radiusX,radiusY:i.radiusY,draggable:i.draggable,transform:i.transform,key:o}));break;case"line":n.push(c.createElement(g,{x:[i.x1,i.x2],y:[i.y1,i.y2],stroke:i.stroke||i.fill,draggable:i.draggable,transform:i.transform,key:o}));break;case"path":n.push(c.createElement(b,{d:i.path||i.d,fill:i.fill,draggable:i.draggable,transform:i.transform,key:o}))}}})),n}},{key:"computeFonts",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.keys(e).map((function(t,r){var o=e[t],i="svg";return"object"===n(e[t])&&(o=e[t].src,i=e[t].format||"svg"),c.createElement("style",{key:r},"@font-face {\n              font-family: '".concat(t,"';\n              src: url(\"").concat(o,'") format("').concat(i,'");\n              font-weight: normal;\n              font-style: normal;\n          }'))}))}},{key:"render",value:function(){var e=this.props.configuration,t=e.card,r=e.fonts,n=e.layers,o=this.computeLayers(n),i=this.computeGradients(n),a=this.computeFonts(r);return c.createElement("div",{className:"card",ref:this.svgRef,style:{maxWidth:t.width,maxHeight:t.height}},c.createElement(p,{height:t.height,width:t.width,fill:t.fill},c.createElement("defs",null,a,i),o))}}])&&o(t.prototype,r),u&&o(t,u),s}(c.Component);x.propTypes={configuration:s.shape({card:s.object,fonts:s.object,layers:s.object}),onMount:s.func},e.exports=x},function(e,t){e.exports=o},function(e,t){e.exports=i},function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(11),i=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)throw new Error("An instance of CardKit was not provided");if(!(t instanceof o)&&"CardKit"!==t.constructor.name)throw new Error("Invalid CardKit object provided");this.cardkit=t,this.cardkit.addRenderer(this)}var t,r,i;return t=e,(r=[{key:"rerender",value:function(){}},{key:"computeConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.cardkit.computeConfiguration(e)}}])&&n(t.prototype,r),i&&n(t,i),e}();e.exports=i},function(e,t,r){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=r(12),u=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o(this,e),!t)throw new Error("A configuration object was not provided");if(!this._isValidConfiguration(t))throw new Error("Invalid configuration object provided");this.configuration=t,this._configureOptions(r),this.renderers=[]}var t,r,u;return t=e,(r=[{key:"_configureOptions",value:function(e){if(e){if(e.templates){if(!this._isValidTemplatesConfiguration(e.templates))throw new Error("Invalid templates configuration object provided");this.templates=e.templates}else this.templates=null;if(e.themes){if(!this._isValidThemesConfiguration(e.themes))throw new Error("Invalid themes configuration object provided");this.themes=e.themes}else this.themes=null;if(e.layouts){if(!this._isValidLayoutsConfiguration(e.layouts))throw new Error("Invalid layouts configuration object provided");this.layouts=e.layouts}else this.layouts=null}}},{key:"_isValidConfiguration",value:function(e){return"object"===n(e)&&void 0!==e.card&&"object"===n(e.card)&&void 0!==e.card.height&&void 0!==e.card.width}},{key:"_isValidTemplatesConfiguration",value:function(e){return"object"===n(e)}},{key:"_isValidThemesConfiguration",value:function(e){return"object"===n(e)}},{key:"_isValidLayoutsConfiguration",value:function(e){return"object"===n(e)}},{key:"_isValidRenderer",value:function(e){return e.cardkit===this}},{key:"computeConfiguration",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object.assign({},this.configuration);return e&&(e.template&&void 0!==this.templates[e.template]&&(t=a(t,this.templates[e.template])),e.theme&&void 0!==this.themes[e.theme]&&(t=a(t,this.themes[e.theme])),e.layout&&void 0!==this.layouts[e.layout]&&(t=a(t,this.layouts[e.layout]))),t}},{key:"updateConfiguration",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{layouts:null,templates:null,themes:null},r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(this.configuration=e,this._configureOptions(t),r){var n=this.getRenderers();n.forEach((function(e){switch(e.constructor.name){case"CardKitDOM":e.rerender()}}))}}},{key:"getRenderers",value:function(){return this.renderers}},{key:"addRenderer",value:function(e){if(!this._isValidRenderer(e))throw new Error("Invalid renderer object provided");this.renderers.push(e)}}])&&i(t.prototype,r),u&&i(t,u),e}();e.exports=u,"undefined"!=typeof window&&(window.CardKit=u)},function(e,t){e.exports=a},function(e,t){e.exports={slugify:function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/--+/g,"-").replace(/^-+/,"").replace(/-+$/,"")},svgToBase64:function(e,t){return t(unescape(encodeURIComponent(e)))},capitaliseFirstLetter:function(e){return e.charAt(0).toUpperCase()+e.slice(1)}}}])}));